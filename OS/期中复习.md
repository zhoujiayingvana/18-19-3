# 多程序处理操作系统特征

并发性	concurrence

共享性	sharing

虚拟性	virtual

异步性	asynchronism

# 硬件保护

双模式：防止操作系统和硬件被破坏

特权指令

IO保护：所有IO操作特权指令

内存保护：防止进程非法访问其他内存空间。基址寄存器，界限寄存器

CPU保护：防止CPU被一个程序长时间占用。定时器。修改定时器是特权指令

# 操作系统的功能（对内功能）

进程管理

内存管理

磁盘管理

文件管理

IO系统管理

# 操作系统的服务（对外服务）

## 用户级：

程序执行

IO操作

文件管理

通讯：进程之间的信息交换

错误检测与处理

## 系统级：

资源分配

审计：对系统使用资源的记录

保护

# 操作系统接口

## 用户接口

命令行CLI

批接口

GUI：UI界面

## 系统接口

### 系统调用

#### 实现：

系统调用接口：SCI

应用程序接口：API

#### 系统调用种类：

进程控制

文件管理

设备管理

信息维护

通信

# 操作系统结构

简单结构

分层结构（虚拟机）

微内核结构

模块化内核结构

# 进程

## 概念

正在执行的程序

## 组成

代码段

数据段

程序计数器

进程寄存器

堆栈

## 特征

动态性	dynamic

独立性	independency：进程之间相互独立

并发性	concurrence

结构化	structure

## 进程5态

![1556008225162](C:\Users\温莎公爵\AppData\Roaming\Typora\typora-user-images\1556008225162.png)

创建态、就绪态、运行态、等待态、终止态

## 进程调度种类

短期调度：CPU调度。决定哪个可用进程占用CPU执行

长期调度：工作调度（job~）决定哪些进程可以调进内存中

中期调度：可使进程进入挂起状态。

## 上下文切换

CPU切换到另一个进程需要保存当前进程的状态并恢复另一个进程的状态

上下文切换包括保存当前任务的运行环境，恢复将要运行任务的运行环境。

# 线程

## 概念

线程是一个控制流，属于某个进程

## 组成

- 非共享：线程ID、栈和栈指针、程序计数器、通用寄存器和条件码
- 共享：用户虚拟**地址空间**、代码段、数据段、堆等

## 优点

提高响应速度：多个线程同时监督响应

减小资源开销：线程共享所属进程的内存资源

减小创建和切换开销：相比于进程

提高多处理器CPU利用效率：线程是CPU调度最小单位

## 信号机制和中断机制

**信号与中断的相似点：** 
（1 ）采用了相同的异步通信方式； 
（2 ）当检测出有信号或中断请求时，都暂停正在执行的程序而转去执行相应的处理程序； 
（3 ）都在处理完毕后返回到原来的断点； 
（4 ）对信号或中断都可进行屏蔽。

**信号与中断的区别：** 
（1 ）中断有优先级，而信号没有优先级，所有的信号都是平等的； 
（2 ）信号处理程序是在用户态下运行的，而中断处理程序是在核心态下运行； 
（3 ）中断响应是及时的，而信号响应通常都有较大的时间延迟。

